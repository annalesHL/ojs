// SAN

// en cas de grand écran on baisse un peu le logo
.has_site_logo .pkp_head_wrapper {
    padding-top: @triple;
    @media(min-width: @screen-desktop) {
	padding-top: 3 * @triple;
    }
}

.pkp_structure_head {
    background: @bg;
}

.pkp_navigation_user {
    font-family: 'orator_stdregular';
}

// Disable the breadcrumb
.cmp_breadcrumbs {
    display: none;
}

// Center home image
.pkp_site_name {
    display: table;
    > a {
	padding-top: 0;
	@media( min-width: @screen-desktop ) {
	    padding-top: @base;
	}
    }
    a.is_img {
	margin-left: auto;
	margin-right: auto;
	margin-bottom: 2 * @menu-padding + @base;
	@media( min-width: @screen-desktop ) {
	    margin-bottom: 10px;
	}
	position: relative;
	z-index: 100;
	img {
	    height: 80px;
	    max-height: none;
	    max-width: none;
	}
    }
}

// Menu principal
.pkp_navigation_primary {
    font-size: @font-base;
    max-width: none;
    text-align: center;
    display: table;
    margin-left: auto;
//    width: fit-content;
    margin-right: auto;
    > ul > li > div {  // hauteur du menu
	height: @line-base + @menu-padding;
	@media( min-width: @screen-desktop ) {
	    height: @line-base + @menu-padding * 2;
	}
    }
    ul a {// En mode mobile, le padding top/bottom
	   // influence la height seulement en si le .circle est en
	   // position:absolute... pourquoi???
	padding-top: @menu-padding/2;
	padding-bottom: @menu-padding/2;
	@media( min-width: @screen-desktop ) {
	    padding-top: @menu-padding;
	    padding-bottom: @menu-padding;
	}
    }
    .hline {
	color: @bleu-menu-border;
        border-bottom: 1px solid;
	position: relative;
	@media( min-width: @screen-desktop ) {
	    width: @menu-width;
	    margin: auto;
	}
    }
    .hline.bottom {
	top: -1px;
	@media( min-width: @screen-desktop ) {
	    top: -5px;
	}
    }
    .hline.top {
	top: 1px;
	@media( min-width: @screen-desktop ) {
	    top: 4px;
	}
    }
}

// on met un disque au centre de chaque entrée du menu principal

@circle: 30px;

.circle {
    background: @bleu-logo-bg;
    opacity: 0.5;
    border-radius: 50%;
    height: @circle;
    width: @circle;
    margin-right: 0px;
    margin-top: -@circle - @menu-padding; // à remettre à zéro quand on passe en absolute
    top: 10px;
    @media (min-width: @screen-desktop) {
	top: 3px;
    }
}

.annales_text {
    //height: 40px;
    text-align: center;
    @media (min-width: @screen-desktop) {
	background: @bg;
    }
    padding-left: 5px;
    padding-right: 5px;
}

.pkp_navigation_primary li {
    font-family: orator_stdregular;
    width: 100%;
    @media (min-width: @screen-desktop) {
	width: auto;
    }
    a {
	color: @bleu-menu;
	z-index: 1;
	position: relative; // otherwise z-index does not work
	border: 0;
	text-transform: uppercase;
	font-weight: bold;
	white-space: nowrap;
    }
    a:hover {
	color: black;
	border: 0;
    }
    a a {
	
    }
    .circle,
    .annales_text {
	margin-left: auto;
	margin-right: auto;
	position: relative; // relative, afin que le calcul des marges
			    // "auto" se fasse (pour center). il
			    // faudra mettre à "absolute" pour gérer les
			    // animations en js
    }
    .annales_text {
	top: -@menu-padding/2;
	margin-top: -@circle - @menu-padding; // à remettre à zéro quand on passe en absolute
	@media (min-width: @screen-desktop) {
	    position: absolute; // la position absolue a aussi cet
	    // avantage que le 'fond blanc' est
	    // restreint au texte seul (pourquoi?)
	    margin-top: 0px;
	    left: 3em;
	    top: -8px;
	}
    }
}
.pkp_navigation_primary > ul > li {
    margin-left: 0;
    margin-right: 0;
    @media (min-width: @screen-desktop) {  // utile ?
	margin-left: 5px;
	margin-right: 5px;
    }
}
/*
.pkp_navigation_primary > ul > li:first-child {
	margin-left: 0px;
}
.pkp_navigation_primary > ul > li:last-child {
	margin-right: 0px;
}
*/


// le menu est sur une ligne horizontale en mode desktop
// et vertical/centré pour des écrans plus petits
// largeur totale: @menu-width (dans variables.less)
@menu-width-1-5: 7em; // largeur des items 1 et 5
@menu-width-2-4: 12em; // largeur des items 2 et 4
@menu-width-3:   11em; // largeur de l'item central (3)
.pkp_structure_head .pkp_navigation_primary > ul {
    li > div {
	text-align: center;
    }
    > li:first-child > div { // contents
	border-bottom: 1px solid @bleu-input;
	@media (min-width: @screen-desktop) {
	    border-bottom: none;
	    //text-align: left;
	    //min-width: 92px;
	    width: @menu-width-1-5;
	    .circle {
		//margin-left: 16 + (50 - @circle)/2;  // 16px pour 50px rayon. à calculer ?
	    }
	}
    }
    > li:nth-child(2) > div { // editorial board
	border-bottom: 1px solid @bleu-input;
	@media (min-width: @screen-desktop) {
	    width: @menu-width-2-4;
	    border-bottom: none;
	}
    }
    > li:nth-child(3) { // en mode téléphone, on monte l'item 3 (AHL) au dessus des autres
	position: absolute;
	top: -33px;
	left: 0;
	@media( min-width: @screen-desktop ) { // item 3 en place normale
	    position: relative;
	    top: auto;
	    left: auto;
	    width: @menu-width-3;
	}
    }
    > li:nth-child(3) > div { // AHL
	a {
	    color: black;
	}
    }
    > li:nth-child(4) > div { // submission
	border-bottom: 1px solid @bleu-input;
	@media (min-width: @screen-desktop) {
	    border-bottom: none;
	    width: @menu-width-2-4;
	}
    }
    > li:last-child > div { // about
	@media (min-width: @screen-desktop) {
	    width: @menu-width-1-5;
	    //text-align: right;
	    .circle {
		margin-left: auto;
		//margin-right: 11 + (50 - @circle)/2;// 6px pour rayon 50px. à calculer ?
	    }
	}
    }
}

// disable caret indicating submenus
.pkp_navigation_primary .pkp_nav_list [aria-expanded="true"]:before {
    display: none;  // ne marche pas
}

.pkp_page_index .additional_content {
    text-align: center;
    font-size: @font-base;
}

// Sous menus (ex: about)
//
// ils sont centrés en mode tablette, et au contraire fixés en dessus
// en mode desktop
.pkp_navigation_primary  .pkp_nav_list {
    li:hover ul {
	opacity: 1;
    }
    li ul {
	background: @bleu-bg2;
	border-radius: 15px;
	margin-left: 20%;
	li {
	    padding: 15px;
	}
	@media (min-width: @screen-desktop) {
	    position: absolute;
	    bottom: 100%;
	    -webkit-transition: opacity 0.8s;
	    transition: opacity 0.8s;
	    opacity: 0;
	    padding-bottom: @base;
	    top: auto;
	    margin-right: 0;
	    background: none;
	    padding-left: 10px;
	    width: 14em;
	    li {
		padding: 0;
	    }
	}
	box-shadow: none;
	li a {
	    height: 24px;
	    padding: 0;
	}
	li a:hover {
	    background: none;
	}
    }
}
.pkp_navigation_primary  .pkp_nav_list li:hover > ul {
    left: 0px;
}

// Top navigation bar
// XAVIER


.pkp_navigation_backend_primary {
    display: none; // à corriger... et mettre du js pour montrer le menu...
}
.pkp_navigation_backend_primary {
    @media(min-width: @screen-desktop) {
	display: block;
    }
}

@submenu-border-radius: 8px;

.pkp_page_admin .pkp_navigation_backend_primary,
.pkp_navigation_backend_primary {
    li a {
	font-weight: normal;
    }
    /*
    li[aria-expanded="true"] > a {
	font-weight: bold;
    }
    */
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 3000;
    background: @bg-toolbar;
    border-bottom: solid 1px @border-toolbar;
    #notificationsPopover {
	display: none;
	position: absolute;
	top: 100%;
	left: 0px;
	width: 500px;
	background: none;
	.pkp_controllers_grid {
	    border: none;
	    border-radius: 0px;
	    border-left: solid 1px @border-toolbar;
	    border-right: solid 1px @border-toolbar;
	    border-bottom: solid 1px @border-toolbar;
	    border-radius: 0 0 @submenu-border-radius @submenu-border-radius;
	    background: @bg-toolbar;
	    .gridPaging {
		display: none;
	    }
	    .actions {
		border: none;
		border-radius: 0 0 @submenu-border-radius @submenu-border-radius;
		padding-top: 4px;
		padding-bottom: 4px;
		box-shadow: none;
		background: @bleu-bg2;
		a {
		    font-weight: normal;
		    border: none;
		}
		li {
		    border: none;
		}
		li:hover, a:hover {
			      background: inherit;
			      color: black;
			  }
	    }
	}
    }
    > ul {
	width: 100%;
	margin: 0px;
	padding-left: 10px;
	padding-right: @double;
	text-align: left;
    }
    > ul > li {
	text-align: left;
	a {
	    margin: 0;
	    padding-left: 10px;
	    padding-top: 3px;
	    padding-bottom: 3px;
	    padding-right: 10px;
	    //color: black;
	    font-size: smaller;
	}
	> ul {  // menu déroulant
	    position: absolute;
	    top: 100%;
	    left: 0;
	    z-index: 2000;
	    display: none;
	    box-shadow: none;
	    //margin-top: -1px; //  pour recouvrir le border-bottom de la barre de menus
	    border-radius: 0 0 @submenu-border-radius @submenu-border-radius;
	    border-left: 1px solid @border-toolbar;
	    border-right: 1px solid @border-toolbar;
	    border-bottom: 1px solid @border-toolbar;
	    //border-top: 1px solid @bg-toolbar;
	    background: @bg-toolbar;
	    @media( max-width: @screen-desktop ) {
		left: 150px;
		top: 8px;
	    }
	    @media( min-width: @screen-desktop ) {
		//bottom: 0px;
		left: 0px;
	    }
	    width: 6 * @triple;
	    li {
		//background: @bg-toolbar;
		//border-left: 1px solid @border-toolbar;
		//border-right: 1px solid @border-toolbar;
		a {
		    padding-left: 10px;
		    padding-top: 2px;
		    padding-bottom: 0px;
		}
	    }
	    li:last-child {
		padding-bottom: 4px;
		//border-bottom: solid 1px @border-toolbar;
	    }
	    li:hover,
	    li:hover a {
		background: transparent;
		color: black;
	    }
	}
    }
    > ul > li:hover {
	> a, #userTasks > a {
            font-weight: normal;
	    color: black;
	}
	> ul, #notificationsPopover {
	    display: block;
	}
    }
    > ul > li.profile {
	float: right;
	padding-right: 0px;
	text-align: right;
	min-width: 130px;
	> a {
	    text-transform: none;
	    padding-right: 6px;
	}
	a {
	    color: black;
	}
	> a::before {
	    content: "\f007";
	    font: normal normal normal 14px/1 FontAwesome;
	}
	> ul {
	    right: 0px;
	    width: 130px;
	    max-width: 130px; // ???
	    a:hover {
		color: @bleu-logo;
	    }
	}
    }
}
.pkp_nav_list [aria-haspopup] > a::after,
.pkp_nav_list [aria-expanded="true"]::before {
    display: none;
}

.loginLink {
    position: absolute;
    z-index: 2000;
    right: 26px;
    top: 8px;
    @media(min-width: @screen-desktop) {
	top: 3px;
    }
    font-size: 90%;
    a {
	color: black;
	font-family: orator_stdregular;
	text-decoration: none;
    }
}
